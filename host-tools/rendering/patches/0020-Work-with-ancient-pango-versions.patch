From 7c881c6bed8dd5c929a7aeb2108b87e7758955a7 Mon Sep 17 00:00:00 2001
From: Holger Freyther <ich@tamarin.(none)>
Date: Tue, 17 Mar 2009 07:06:47 +0100
Subject: [PATCH] Work with ancient pango versions...

---
 WebCore/platform/graphics/gtk/FontGtk.cpp |    8 ++++++++
 1 files changed, 8 insertions(+), 0 deletions(-)

diff --git a/WebCore/platform/graphics/gtk/FontGtk.cpp b/WebCore/platform/graphics/gtk/FontGtk.cpp
index 5e3c069..b21dc73 100644
--- a/WebCore/platform/graphics/gtk/FontGtk.cpp
+++ b/WebCore/platform/graphics/gtk/FontGtk.cpp
@@ -526,11 +526,19 @@ static void setPangoAttributes(const Font* font, const TextRun& run, PangoLayout
 // We should create the layout with our actual context but we can't access it from here.
 static PangoLayout* getDefaultPangoLayout(const TextRun& run)
 {
+#if PANGO_VERSION_CHECK(1, 22, 0)
     static PangoFontMap* map = pango_ft2_font_map_new();
     static PangoContext* pangoContext = pango_font_map_create_context(map);
     PangoLayout* layout = pango_layout_new(pangoContext);
 
     return layout;
+#else
+    static PangoFT2FontMap* map = PANGO_FT2_FONT_MAP(pango_ft2_font_map_new());
+    static PangoContext* pangoContext = pango_ft2_font_map_create_context(map);
+    PangoLayout* layout = pango_layout_new(pangoContext);
+
+    return layout;
+#endif
 }
 
 
-- 
1.5.6.3

