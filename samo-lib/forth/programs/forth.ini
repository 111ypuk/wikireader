.( autostart )
decimal


: menu ( -- )
    lcd-cls
    s" Forth programs" lcd-type lcd-cr lcd-cr

    s" /" open-directory ?dup
    if  cr ." open-directory error = "
        dec. drop exit
    then
    >r    \ save dirid
    begin
        here 256 r@ read-directory ?dup
        if  cr ." directory read error = "
            dec. drop
            r> close-directory drop exit
        then
        dup
    while
            here swap ( c-addr u )
            2dup s" .4TH" search if
                4 = if
                    bl lcd-emit
                    drop 4 - lcd-type lcd-cr
                else
                    drop 2drop
                then
            else
                2drop 2drop
            then
    repeat
    drop
    r>  close-directory drop ;

lcd-cls
menu

\ include scan-sd.4th
\ include ctp-acc.4th


.( autostart - exiting )
decimal
