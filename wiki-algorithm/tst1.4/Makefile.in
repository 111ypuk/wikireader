srcdir = @srcdir@
prefix = @prefix@
exec_prefix = @exec_prefix@
includedir = @includedir@
libdir = @libdir@
mandir = @mandir@
datarootdir = @datarootdir@
SHELL = @SHELL@

CC = @CC@
CFLAGS = @CFLAGS@
LIBTOOL = ./libtool
INSTALL_PROGRAM = ./install-sh
OBJECTS = tst_cleanup.o tst_delete.o tst_grow_node_free_list.o tst_init.o \
          tst_insert.o tst_search.o
LOBJECTS = tst_cleanup.lo tst_delete.lo tst_grow_node_free_list.lo tst_init.lo \
           tst_insert.lo tst_search.lo
LIBTOOL_TARGET =  libtst.la
TARGETS = ${LIBTOOL_TARGET}

all: ${TARGETS}

%.lo: %.c tst.h
	${LIBTOOL} --mode=compile ${CC} ${CFLAGS} -c $<

${LIBTOOL_TARGET}: ${LOBJECTS}
	${LIBTOOL} --mode=link ${CC} -rpath ${libdir} -o ${LIBTOOL_TARGET} ${LOBJECTS}

installdirs:
	${SHELL} ${srcdir}/mkinstalldirs ${libdir} ${includedir}

install:	all installdirs
	${LIBTOOL} --mode=install ${INSTALL_PROGRAM} -c ${srcdir}/libtst.la ${libdir}

clean:
	rm -fr ${OBJECTS} ${LOBJECTS} ${TARGETS} .libs

distclean: clean
	rm -fr Makefile autom4te.cache config.log config.status
